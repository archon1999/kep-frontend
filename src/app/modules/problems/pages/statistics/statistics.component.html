@if (username) {
  <div class="content-wrapper container-xxl p-0">
    <div class="content-body">
      <section class="problems-statistics">
        <div class="problems-statistics__header">
          <div>
            <h2 class="problems-statistics__title">{{ 'Statistics' | translate }}</h2>
            <p class="problems-statistics__subtitle">@{{ username }}</p>
          </div>
        </div>

        @if (isLoading && !general) {
          <div class="problems-statistics__loading">
            <spinner></spinner>
          </div>
        } @else if (hasError) {
          <div class="problems-statistics__error">
            <kep-icon name="alert-triangle"></kep-icon>
            <span>{{ 'SomethingWentWrong' | translate }}</span>
          </div>
        } @else {
          <div class="problems-statistics__overview">
            @for (card of overviewCards; track card.titleKey) {
              <div class="problems-statistics__overview-card">
                <div class="problems-statistics__overview-icon">
                  <kep-icon [name]="card.icon"></kep-icon>
                </div>
                <div class="problems-statistics__overview-body">
                  <div class="problems-statistics__overview-label">{{ card.titleKey | translate }}</div>
                  <div class="problems-statistics__overview-value">{{ card.value }}</div>
                  @if (card.description) {
                    <div class="problems-statistics__overview-description">{{ card.description }}</div>
                  }
                </div>
              </div>
            }
          </div>

          <div class="problems-statistics__grid">
            <div class="problems-statistics__left" *ngIf="general">
              <section-profile
                [username]="username"
                [general]="general"
                [langs]="langs"
                [tags]="tags"
                [topics]="topics"
                [facts]="facts"
              ></section-profile>
            </div>
            <div class="problems-statistics__right">
              <div class="problems-statistics__row">
                <section-difficulties [difficulties]="difficulties"></section-difficulties>
                <problems-activity-card
                  [lastDays]="lastDays"
                  [selectedDays]="selectedDays"
                  [daysOptions]="allowedDays"
                  [isLoading]="isLoading"
                  (daysChange)="onDaysChange($event)"
                ></problems-activity-card>
              </div>

              <section-heatmap
                [heatmap]="heatmap"
                [availableYears]="availableYears"
                [selectedYear]="selectedYear"
                [isLoading]="isLoading"
                (yearChange)="onYearChange($event)"
              ></section-heatmap>

              <div class="problems-statistics__row">
                <section-facts [facts]="facts"></section-facts>
                <section-attempts-for-solve [numberOfAttempts]="numberOfAttempts"></section-attempts-for-solve>
              </div>

              <section-time
                [byWeekday]="byWeekday"
                [byMonth]="byMonth"
                [byPeriod]="byPeriod"
              ></section-time>
            </div>
          </div>
        }
      </section>
    </div>
  </div>
}
