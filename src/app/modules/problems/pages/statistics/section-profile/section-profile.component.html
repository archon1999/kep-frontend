<kep-card [customClass]="'profile-card h-100'">
  <div class="card-body">
    <div class="profile-card__hero">
      <div class="profile-card__hero-main">
        <div class="profile-card__avatar">
          <i [data-feather]="'problem' | iconName"></i>
        </div>

        <div class="profile-card__hero-text">
          <h5 class="profile-card__heading">{{ 'Problems' | translate }}</h5>
          <p class="profile-card__subtitle">
            {{ general.solved | number }} {{ 'Solved' | translate }}
          </p>
          <a
            [routerLink]="[Resources.Attempts, username]"
            class="btn btn-outline-light btn-sm profile-card__attempts"
          >
            {{ 'Attempts' | translate }}
          </a>
        </div>
      </div>

      <div class="profile-card__metrics">
        <div class="profile-card__metric" ngbTooltip="{{ 'Solved' | translate }}">
          <div class="profile-card__metric-icon">
            <i data-feather="check-circle"></i>
          </div>
          <div>
            <div class="profile-card__metric-value">{{ general.solved | number }}</div>
            <div class="profile-card__metric-label">{{ 'Solved' | translate }}</div>
          </div>
        </div>

        <div class="profile-card__metric" ngbTooltip="{{ 'Rating' | translate }}">
          <div class="profile-card__metric-icon">
            <i data-feather="trending-up"></i>
          </div>
          <div>
            <div class="profile-card__metric-value">{{ general.rating | number }}</div>
            <div class="profile-card__metric-label">{{ 'Rating' | translate }}</div>
          </div>
        </div>

        <div class="profile-card__metric" ngbTooltip="{{ 'Rank' | translate }}">
          <div class="profile-card__metric-icon">
            <i data-feather="award"></i>
          </div>
          <div>
            <div class="profile-card__metric-value">#{{ general.rank | number }}</div>
            <div class="profile-card__metric-label">{{ 'Rank' | translate }}</div>
            <div class="profile-card__metric-note">
              {{ general.usersCount | number }} {{ 'Users' | translate }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="profile-card__content">
      @if (langs.length) {
        <div class="profile-card__section profile-card__section--languages">
          <div class="profile-card__section-header">
            <span class="profile-card__section-title">{{ 'Languages' | translate }}</span>
          </div>

          <div class="profile-card__language-list">
            @for (data of langs; track data.lang) {
              <div class="profile-card__language">
                <div class="profile-card__language-header">
                  <span class="profile-card__language-name">{{ data.langFull }}</span>
                  <span class="profile-card__language-count">x{{ data.solved }}</span>
                </div>
                <div class="profile-card__progress">
                  <div
                    class="profile-card__progress-bar"
                    [style.width.%]="getShare(data.solved, langMaxSolved)"
                  ></div>
                </div>
              </div>
            }
          </div>
        </div>
      }

      @if (tags.length) {
        <div class="profile-card__section profile-card__section--tags">
          <div class="profile-card__section-header">
            <span class="profile-card__section-title">{{ 'Tags' | translate }}</span>
          </div>

          <div class="profile-card__tag-cloud">
            @for (tag of tags; track tag.name) {
              <span class="profile-card__tag">
                <span class="badge bg-light-primary text-primary">{{ tag.name }}</span>
                <span class="profile-card__tag-count">x{{ tag.value }}</span>
              </span>
            }
          </div>
        </div>
      }

      @if (topics.length) {
        <div class="profile-card__section profile-card__section--topics">
          <div class="profile-card__section-header">
            <span class="profile-card__section-title">{{ 'Topics' | translate }}</span>
          </div>

          <div class="profile-card__topic-list">
            @for (topic of topics; track topic.id) {
              <div class="profile-card__topic">
                <div class="profile-card__topic-info">
                  <div class="profile-card__topic-icon">
                    <kep-icon [name]="topic.icon"></kep-icon>
                  </div>
                  <div>
                    <div class="profile-card__topic-name">{{ topic.topic }}</div>
                    <div class="profile-card__topic-solved">
                      {{ topic.solved | number }} {{ 'Problems' | translate }}
                    </div>
                  </div>
                </div>
                <div class="profile-card__progress profile-card__progress--topic">
                  <div
                    class="profile-card__progress-bar"
                    [style.width.%]="getShare(topic.solved, topicMaxSolved)"
                  ></div>
                </div>
              </div>
            }
          </div>
        </div>
      }
    </div>
  </div>
</kep-card>
