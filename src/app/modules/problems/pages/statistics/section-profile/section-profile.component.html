<kep-card class="statistics-profile-card">
  <div class="card-body">
    <div class="profile-header d-flex justify-content-between align-items-start flex-wrap gap-1">
      <div>
        <div class="text-uppercase text-muted fw-bold small">{{ 'Problems' | translate }}</div>
        <h3 class="mb-0">{{ username }}</h3>
      </div>
      <a [routerLink]="[Resources.Attempts, username]" class="btn btn-primary btn-sm d-flex align-items-center gap-50">
        <kep-icon name="activity" class="font-medium-1"></kep-icon>
        {{ 'Attempts' | translate }}
      </a>
    </div>

    <div class="overview mt-2">
      <div class="overview-item">
        <div class="label">{{ 'Solved' | translate }}</div>
        <div class="value">{{ general?.solved | number }}</div>
      </div>
      <div class="overview-item">
        <div class="label">{{ 'Rating' | translate }}</div>
        <div class="value">{{ general?.rating | number }}</div>
      </div>
      <div class="overview-item">
        <div class="label">{{ 'Rank' | translate }}</div>
        <div class="value">#{{ general?.rank }}
          <span class="text-muted">/{{ general?.usersCount }}</span>
        </div>
      </div>
    </div>

    <div class="profile-section mt-2" *ngIf="langs?.length">
      <div class="section-title">{{ 'Languages' | translate }}</div>
      <ul class="list-unstyled mb-0">
        @for (data of langs | slice:0:6; track data.lang) {
          <li class="d-flex justify-content-between align-items-center py-25">
            <span class="badge badge-light-secondary text-uppercase">{{ data.langFull }}</span>
            <span class="fw-bold">×{{ data.solved }}</span>
          </li>
        }
      </ul>
    </div>

    <div class="profile-section mt-2" *ngIf="topics?.length">
      <div class="section-title">{{ 'Topics' | translate }}</div>
      <div class="topics-grid">
        @for (topic of topics; track topic.id) {
          <div class="topic-chip">
            <kep-icon [name]="topic.icon" class="text-primary"></kep-icon>
            <div class="topic-info">
              <div class="title">{{ topic.topic }}</div>
              <div class="meta text-muted">×{{ topic.solved }}</div>
            </div>
          </div>
        }
      </div>
    </div>

    <div class="profile-section mt-2" *ngIf="tags?.length">
      <div class="section-title">{{ 'Tags' | translate }}</div>
      <div class="tags-cloud">
        @for (tag of tags; track tag.name) {
          <span class="tag-pill">{{ tag.name }}<small>×{{ tag.value }}</small></span>
        }
      </div>
    </div>
  </div>
</kep-card>
