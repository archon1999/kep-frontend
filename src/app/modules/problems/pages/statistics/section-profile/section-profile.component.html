<kep-card customClass="statistics-profile-card">
  <div class="statistics-profile-card__header">
    <div class="statistics-profile-card__title">
      <div class="statistics-profile-card__icon">
        <kep-icon name="problem" class="statistics-profile-card__icon-inner"></kep-icon>
      </div>
      <div class="statistics-profile-card__heading">
        <div class="statistics-profile-card__label">{{ 'Problems' | translate }}</div>
        <a
          [routerLink]="[Resources.Attempts, username]"
          class="btn btn-outline-primary btn-sm attempts-link"
        >
          {{ 'Attempts' | translate }}
        </a>
      </div>
    </div>
    @if (username) {
      <div class="statistics-profile-card__username">
        @{{ username }}
      </div>
    }
  </div>

  <div class="statistics-profile-card__stats">
    <div class="statistics-profile-card__stat">
      <div class="statistics-profile-card__stat-label">{{ 'Solved' | translate }}</div>
      <div class="statistics-profile-card__stat-value">{{ general ? general.solved : 0 }}</div>
    </div>
    <div class="statistics-profile-card__stat">
      <div class="statistics-profile-card__stat-label">{{ 'Rating' | translate }}</div>
      <div class="statistics-profile-card__stat-value">{{ general ? general.rating : 0 }}</div>
    </div>
    <div class="statistics-profile-card__stat">
      <div class="statistics-profile-card__stat-label">{{ 'Rank' | translate }}</div>
      <div class="statistics-profile-card__stat-value">#{{ general ? general.rank : 0 }}</div>
      <div class="statistics-profile-card__stat-sub">{{ general ? general.usersCount : 0 }} {{ 'Users' | translate }}</div>
    </div>
    <div class="statistics-profile-card__stat">
      <div class="statistics-profile-card__stat-label">{{ 'SolvedWithSingleAttempt' | translate }}</div>
      <div class="statistics-profile-card__stat-value">{{ singleAttemptSolved }}</div>
      <div class="statistics-profile-card__stat-sub">{{ singleAttemptPercentage }}%</div>
    </div>
  </div>

  @if (languages.length) {
    <div class="statistics-profile-card__section">
      <div class="statistics-profile-card__section-header">
        <div class="statistics-profile-card__section-title">{{ 'Languages' | translate }}</div>
        <div class="statistics-profile-card__section-subtitle">{{ 'MostUsedLanguages' | translate }}</div>
      </div>
      <div class="statistics-profile-card__languages">
        @for (lang of languages; track lang.lang) {
          <div class="statistics-profile-card__language">
            <div class="statistics-profile-card__language-header">
              <span class="statistics-profile-card__language-name badge badge-{{ lang.lang }}">{{ lang.langFull }}</span>
              <span class="statistics-profile-card__language-value">×{{ lang.solved }}</span>
            </div>
            <div class="statistics-profile-card__language-bar">
              <div class="statistics-profile-card__language-progress" [style.width.%]="lang.share"></div>
            </div>
          </div>
        }
      </div>
    </div>
  }

  @if (topicsView.length) {
    <div class="statistics-profile-card__section">
      <div class="statistics-profile-card__section-header">
        <div class="statistics-profile-card__section-title">{{ 'Topics' | translate }}</div>
        <div class="statistics-profile-card__section-subtitle">{{ 'ProblemCategories' | translate }}</div>
      </div>
      <div class="statistics-profile-card__topics">
        @for (topic of topicsView; track topic.code) {
          <div class="statistics-profile-card__topic" ngbTooltip="{{ topic.topic }}">
            <div class="statistics-profile-card__topic-icon">
              <kep-icon [name]="topic.icon"></kep-icon>
            </div>
            <div class="statistics-profile-card__topic-body">
              <div class="statistics-profile-card__topic-title">{{ topic.topic }}</div>
              <div class="statistics-profile-card__topic-value">×{{ topic.solved }}</div>
            </div>
          </div>
        }
      </div>
    </div>
  }

  @if (tagsView.length) {
    <div class="statistics-profile-card__section statistics-profile-card__section--tags">
      <div class="statistics-profile-card__section-header">
        <div class="statistics-profile-card__section-title">{{ 'Tags' | translate }}</div>
        <div class="statistics-profile-card__section-subtitle">{{ 'PopularTags' | translate }}</div>
      </div>
      <div class="statistics-profile-card__tags">
        @for (tag of tagsView; track tag.name) {
          <span class="statistics-profile-card__tag" ngbTooltip="{{ tag.value }} {{ 'Solved' | translate }}">
            #{{ tag.name }}
          </span>
        }
      </div>
    </div>
  }
</kep-card>
